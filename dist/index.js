"use strict";/* eslint-disable max-len */ /* eslint-disable quotes */ /* eslint-disable no-param-reassign */ /* eslint-disable no-eval */ /* eslint-disable array-callback-return */ /* eslint-disable func-names */ /* eslint-disable prefer-arrow-callback */ /* eslint-disable no-return-await */ /* eslint-disable no-console */ /* eslint-disable arrow-body-style */var ATTRIBUTE_TYPE="text/zirscript",PRE="@";window.$=document.querySelector.bind(document),window.$selectOne=document.querySelector.bind(document),window.$selectAll=document.querySelectorAll.bind(document),window.$selectSome=function(a){return a.map(function(a){return document.querySelector(a)})};var findZirScripts=function(a){return a.filter(function(a){var b=a.getAttribute("type");return b===ATTRIBUTE_TYPE})},getLinkSource=function(a){return a.map(function(a){return a.src})},getSourceCode=function(a){var b=a.map(function(a){return fetch(a).then(function(a){return a.text()})});return b},readSourceCodeZS=function(a){a.map(function(a){a.then(function(a){a.includes("@selectOne")})})},keywords={selectOne:"".concat(PRE,"selectOne")};window.addEventListener("DOMContentLoaded",function(){var scriptsTag=Array.from(document.querySelectorAll("script")),zirScript=findZirScripts(scriptsTag),links=getLinkSource(zirScript),sourceCode=getSourceCode(links);zirScript.map(function(script){script.setAttribute("type","text/javascript"),sourceCode.map(function(source){source.then(function(code){var result="";if(code.includes(keywords.selectOne)){var splitCode=code.split("\n"),indexHasKey=splitCode.findIndex(function(a){return a.includes(keywords.selectOne)}),statementSplit=splitCode[indexHasKey].split(" ").map(function(a){return a}),indexOfKey=statementSplit.findIndex(function(a){return a===keywords.selectOne});if(!statementSplit[indexOfKey+1])throw Error("".concat(keywords.selectOne," must has selector. example: ").concat(keywords.selectOne," h1"));var selectorLastIndex=statementSplit.length-1;statementSplit[selectorLastIndex]="";var lastIndex=splitCode[indexHasKey].split(" ").map(function(a){return a}).length-1,selector=splitCode[indexHasKey].split(" ").filter(function(a,b){return b===lastIndex}).join(""),statement=statementSplit.map(function(a){return a===keywords.selectOne?"document.querySelector(".concat(selector,")"):a}).slice(0,indexOfKey+1).join(" ");splitCode[indexHasKey]=statement,result+=splitCode.join("\n")}console.log(result),eval(result)})})})});